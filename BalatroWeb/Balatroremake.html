<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Balatro Web</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h3 id="hand"></h3>
    <h3>Chips: <span id="chips">0</span></h3> 
    <h3>Mult: <span id="mult">0</span></h3>
    <h3>Score: <span id="score">0</h3>
    <h3>Fire: <span id="fire"></span></h3>
    <button id="card1id" onclick="selectCard(1)"><span id="card1rank"></span> of <span id="card1suit"></span></button>
    <button id="card2id" onclick="selectCard(2)"><span id="card2rank"></span> of <span id="card2suit"></span></button>
    <br>
    <button onclick="playhand()">Play Hand</button>
   <script>
      
      // ranks: 1 for spades, 2 for hearts, 3 for diamonds, 4 for clubs.
      // aces are considered 14

      let cardsInDeck = [1,2,0,0,2,2,0,0,3,2,0,0,4,2,0,0,1,3,0,0,2,3,0,0,3,3,0,0,4,3,0,0];
      let currentDeck = [1,2,0,0,2,2,0,0,3,2,0,0,4,2,0,0,1,3,0,0,2,3,0,0,3,3,0,0,4,3,0,0];
      let amountOfCardsInHands = 0;
      let cardsSelectedrank = [];
      let cardsSelectedsuit = [];
      const suits = ["err","Spades", "Hearts", "Diamonds", "Clubs"];
      const ranks = ["err","err",2,3,4,5,6,7,8,9,10,"Jack","Queen","King","Ace"]
      let handSize = 2;
      let pair = false;
      let last = 0;
      let card1 = {
        rank: 14,
        rankstr: "Ace",
        suit: 1,
        suitstr: "Spades",
        isMultCard: 0,
        isRedSeal: 0,
        isSelected: 0,
        cardNum: 1
      }

      let card2 = {
        rank: 14,
        rankstr: "Ace",
        suit: 1,
        suitstr: "Clubs",
        isMultCard: 0,
        isRedSeal: 0,
        isSelected: 0,
        cardNum: 1
      }





      function RNG(min, max) {
          return Math.round(Math.random() * (max - min) + min);
      }
      
      function drawCards() {
        let i = 1;  
        let cardsNeeded = handSize - amountOfCardsInHands;
        while (i <= cardsNeeded){
          let deckSize = currentDeck.length / 4;
          let RNGcard = RNG(1, deckSize);
          if (i == 1) {
            card1.suit = currentDeck[RNGcard * 4 - 4];
            card1.suitstr = suits[currentDeck[RNGcard * 4 - 4]];
            card1.rank = currentDeck[RNGcard * 4 - 3];
            card1.rankstr = ranks[currentDeck[RNGcard * 4 - 3]];
            card1.isMultCard = currentDeck[RNGcard * 4 - 2];
            card1.isRedSeal = currentDeck[RNGcard * 4 - 1];
            currentDeck.splice(RNGcard * 4 - 4, 4);
          } else if (i == 2) {
            card2.suit = currentDeck[RNGcard * 4 - 4];
            card2.suitstr = suits[currentDeck[RNGcard * 4 - 4]];
            card2.rank = currentDeck[RNGcard * 4 - 3];
            card2.rankstr = ranks[currentDeck[RNGcard * 4 - 3]];
            card2.isMultCard = currentDeck[RNGcard * 4 - 2];
            card2.isRedSeal = currentDeck[RNGcard * 4 - 1];
            currentDeck.splice(RNGcard * 4 - 4, 4);
          }

          i++;
        }
      }

      function writecards() {
        document.getElementById("card1rank").innerHTML = card1.rankstr;
        document.getElementById("card1suit").innerHTML = card1.suitstr;
        document.getElementById("card2rank").innerHTML = card2.rankstr;
        document.getElementById("card2suit").innerHTML = card2.suitstr;
      }

      function selectCard(cardnum) {
        if (cardnum == 1) {
          if (card1.isSelected == 0) {
            card1.isSelected = 1;
          } else {
            card1.isSelected = 0;
          }
        } else if (cardnum == 2) {
          if (card2.isSelected == 0) {
            card2.isSelected = 1;
          } else {
            card2.isSelected = 0;
          }
        }
      }
      function playhand() {
        cardsSelectedrank = [];
        cardsSelectedsuit = [];
        if (card1.isSelected == 1) {
          cardsSelectedrank.push(card1.rank);
          cardsSelectedsuit.push(card1.suit);
        } else if (card2.isSelected == 1) {
          cardsSelectedrank.push(card2.rank);
          cardsSelectedsuit.push(card2.rank);
        }

        last = cardsSelectedrank[0];
        for (var i=1; i < cardsSelectedrank.length; i++) {
          if (last == cardsSelectedrank[i]) {
            pair = true;
            break;
          }
          last = cardsSelectedrank[i];
          
        }
        alert(last);
        alert(pair);
      }
      drawCards();
      writecards();
    </script>
  </body>
</html>
